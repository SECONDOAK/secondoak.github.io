<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SECOND OAK</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700;900&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
    html { overflow-x: hidden; }

    :root {
      --bg: #fafafa;
      --text: #111;
      --text-muted: #999;
      --accent: #111;
      --card-bg: #ffffff;
      --card-border: #e8e8e8;
      --card-hover: #f5f5f5;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
      transition: background 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }

    body.dark-mode {
      background: #0a0a0a;
    }

    /* ---- NAV ---- */
    .top-nav {
      position: fixed;
      top: 0;
      right: 0;
      z-index: 100;
      padding: 1.5rem 2rem;
    }

    .lang-toggle {
      display: flex;
      gap: 0;
      border: 1px solid var(--card-border);
      border-radius: 2px;
      overflow: hidden;
      background: var(--card-bg);
      transition: background 0.6s, border-color 0.6s;
    }

    body.dark-mode .lang-toggle {
      background: rgba(255,255,255,0.08);
      border-color: rgba(255,255,255,0.15);
    }

    body.dark-mode .lang-btn {
      color: rgba(255,255,255,0.5);
    }

    body.dark-mode .lang-btn.active {
      background: rgba(255,255,255,0.9);
      color: #0a0a0a;
    }

    .lang-btn {
      padding: 0.4rem 0.75rem;
      font-size: 0.65rem;
      font-weight: 500;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      font-family: inherit;
      border: none;
      cursor: pointer;
      background: transparent;
      color: var(--text-muted);
      transition: all 0.3s;
    }

    .lang-btn.active {
      background: var(--accent);
      color: var(--bg);
    }

    /* ---- HERO ---- */
    .hero {
      min-height: 100vh;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1;
      padding: 2rem;
      overflow: hidden;
      background: var(--bg);
      transition: background 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }

    body.dark-mode .hero {
      background: #0a0a0a;
    }

    .hero-title {
      font-size: clamp(4.5rem, 14vw, 9rem);
      font-weight: 900;
      letter-spacing: -0.04em;
      line-height: 0.9;
      text-transform: uppercase;
      text-align: center;
      opacity: 0;
      animation: titleReveal 1s cubic-bezier(0.16, 1, 0.3, 1) 0.2s forwards;
    }

    .hero-title .line {
      display: block;
      overflow: hidden;
      transition: overflow 0s 1.4s;
    }

    .hero-title.scroll-ready .line {
      overflow: visible;
    }

    .hero-title .line span {
      display: inline-block;
      transform: translateY(100%);
      animation: lineUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    .hero-title .line:nth-child(1) span { animation-delay: 0.3s; }
    .hero-title .line:nth-child(2) span { animation-delay: 0.5s; }

    @keyframes titleReveal {
      to { opacity: 1; }
    }

    @keyframes lineUp {
      to { transform: translateY(0); }
    }

    .hero-sub {
      font-size: clamp(0.85rem, 1.5vw, 1.1rem);
      font-weight: 300;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-top: 2rem;
      opacity: 0;
      animation: fadeUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.9s forwards;
    }

    .scroll-indicator {
      position: fixed;
      bottom: 2.5rem;
      left: 0;
      right: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      opacity: 0;
      z-index: 10;
      pointer-events: none;
      animation: fadeUp 0.6s ease 1.2s forwards;
    }

    .scroll-indicator span {
      font-size: 0.65rem;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .scroll-line {
      width: 1px;
      height: 40px;
      background: linear-gradient(to bottom, var(--text-muted), transparent);
      animation: scrollPulse 2s ease-in-out infinite;
    }

    @keyframes scrollPulse {
      0%, 100% { opacity: 0.3; transform: scaleY(1); }
      50% { opacity: 1; transform: scaleY(1.2); }
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ---- ABOUT ---- */
    .about-section {
      position: sticky;
      top: 0;
      z-index: 2;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 4rem 2rem;
      margin-top: -20vh;
      background: var(--bg);
      transition: background 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }

    body.dark-mode .about-section {
      background: #0a0a0a;
    }

    .about-inner {
      max-width: 700px;
      width: 100%;
    }

    .about-label {
      font-size: 0.7rem;
      font-weight: 500;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 2rem;
      opacity: 0;
      transform: translateY(12px);
      transition: opacity 0.5s ease, transform 0.5s ease;
    }

    .about-label.revealed {
      opacity: 1;
      transform: translateY(0);
    }

    .about-text {
      font-size: clamp(1.3rem, 2.5vw, 1.8rem);
      font-weight: 300;
      line-height: 1.6;
      letter-spacing: -0.01em;
      color: var(--text);
    }

    .about-text strong {
      font-weight: 700;
    }

    .about-text .word {
      display: inline-block;
      opacity: 0;
      transform: translateY(8px);
      transition: opacity 0.4s ease, transform 0.4s ease;
    }

    .about-text .word.revealed {
      opacity: 1;
      transform: translateY(0);
    }

    .about-services {
      display: flex;
      gap: 2rem;
      margin-top: 3rem;
      flex-wrap: wrap;
    }

    .service-item {
      font-size: 0.7rem;
      font-weight: 500;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--text-muted);
      position: relative;
      padding-left: 1rem;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.4s ease, transform 0.4s ease;
    }

    .service-item.revealed {
      opacity: 1;
      transform: translateY(0);
    }

    .service-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: currentColor;
    }

    /* ---- PROJECTS ---- */
    .projects-section {
      padding: 6rem 2rem 8rem;
      max-width: none;
      margin: 0;
      position: sticky;
      top: 0;
      z-index: 3;
      color: #f0f0f0;
      background: #0a0a0a;
      min-height: 100vh;
      opacity: 0;
      transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .projects-section.visible {
      opacity: 1;
    }

    .projects-inner {
      max-width: 900px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }

    .section-label {
      font-size: 0.7rem;
      font-weight: 500;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: rgba(0,255,136,0.7);
      margin-bottom: 1.5rem;
      opacity: 0;
      transform: translateY(16px);
      transition: opacity 0.7s cubic-bezier(0.16, 1, 0.3, 1),
                  transform 0.7s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .projects-section.visible .section-label {
      opacity: 1;
      transform: translateY(0);
      transition-delay: 0.4s;
    }

    .playground-desc {
      font-size: clamp(1.1rem, 2vw, 1.35rem);
      font-weight: 300;
      color: rgba(255,255,255,0.5);
      line-height: 1.6;
      max-width: 550px;
      margin-bottom: 3rem;
      opacity: 0;
      transform: translateY(16px);
      transition: opacity 0.7s cubic-bezier(0.16, 1, 0.3, 1),
                  transform 0.7s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .projects-section.visible .playground-desc {
      opacity: 1;
      transform: translateY(0);
      transition-delay: 0.65s;
    }

    /* Neon grid background — behind cards */
    @keyframes neonPulse {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }

    .projects-section::before {
      content: '';
      position: absolute;
      inset: 0;
      z-index: 0;
      background-image:
        linear-gradient(rgba(0,255,136,0.15) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,255,136,0.15) 1px, transparent 1px);
      background-size: 40px 40px;
      mask-image: radial-gradient(ellipse at center, black 40%, transparent 75%);
      -webkit-mask-image: radial-gradient(ellipse at center, black 40%, transparent 75%);
      opacity: 0;
      transition: opacity 1s ease 0.3s;
      animation: neonPulse 6s ease-in-out infinite;
      animation-play-state: paused;
    }

    .projects-section.visible::before {
      opacity: 1;
      animation-play-state: running;
    }

    /* Neon glow accents */
    .projects-section::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, rgba(0,255,136,0.5), rgba(0,200,255,0.5), transparent);
    }

    .projects-grid {
      position: relative;
      z-index: 1;
      display: grid;
      gap: 1.5rem;
    }

    .project-card {
      display: block;
      background: rgba(18,18,18,0.75);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      padding: 2.5rem 2rem;
      text-decoration: none;
      color: #f0f0f0;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.14);
      transition: background 0.4s ease, box-shadow 0.4s ease, border-color 0.4s ease;
      opacity: 0;
      transform: translateY(30px);
    }

    .project-card.visible {
      opacity: 1;
      transform: translateY(0);
      transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1),
                  transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .project-card:hover {
      background: rgba(18,18,18,0.6);
      border-color: rgba(0,255,136,0.3);
      box-shadow: 0 8px 40px rgba(0,0,0,0.4), 0 0 30px rgba(0,255,136,0.06);
    }

    .project-card::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, rgba(0,255,136,0.8), rgba(0,200,255,0.8));
      transition: width 0.5s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .project-card:hover::after {
      width: 100%;
    }

    .card-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 1.25rem;
    }

    .project-number {
      font-size: 0.7rem;
      font-weight: 500;
      letter-spacing: 0.2em;
      color: rgba(0,255,136,0.5);
    }

    .project-arrow {
      width: 20px;
      height: 20px;
      opacity: 0;
      transform: translate(-5px, 5px);
      transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .project-card:hover .project-arrow {
      opacity: 1;
      transform: translate(0, 0);
    }

    .project-name {
      font-size: clamp(1.5rem, 3vw, 2.2rem);
      font-weight: 900;
      letter-spacing: -0.03em;
      text-transform: uppercase;
      margin-bottom: 0.6rem;
      line-height: 1;
    }

    .project-desc {
      font-size: 0.85rem;
      font-weight: 300;
      color: rgba(255,255,255,0.45);
      line-height: 1.6;
      max-width: 400px;
    }

    .project-tags {
      display: flex;
      gap: 0.5rem;
      margin-top: 1.25rem;
      flex-wrap: wrap;
    }

    .tag {
      font-size: 0.6rem;
      font-weight: 500;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.4);
      border: 1px solid rgba(255,255,255,0.1);
      padding: 0.3rem 0.65rem;
      border-radius: 2px;
      transition: border-color 0.3s, color 0.3s;
    }

    .project-card:hover .tag {
      border-color: rgba(0,255,136,0.25);
      color: rgba(255,255,255,0.6);
    }

    /* ---- FOOTER ---- */
    footer {
      padding: 3rem 2rem;
      text-align: center;
      font-size: 0.65rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.3);
      position: relative;
      z-index: 3;
      background: #0a0a0a;
      border-top: 1px solid rgba(255,255,255,0.06);
    }

    /* dark-overlay replaced by .playground-intro */

    /* ---- GRAIN OVERLAY ---- */
    .grain {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 999;
      opacity: 0.03;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
      background-repeat: repeat;
      background-size: 128px 128px;
    }

    /* ---- CURSOR GLOW ---- */
    .cursor-glow {
      position: fixed;
      width: 500px;
      height: 500px;
      border-radius: 50%;
      pointer-events: none;
      z-index: 0;
      background: radial-gradient(circle, rgba(0,0,0,0.015) 0%, transparent 70%);
      transform: translate(-50%, -50%);
      transition: opacity 0.3s;
      opacity: 0;
    }

    body:hover .cursor-glow {
      opacity: 1;
    }

    /* ---- RESPONSIVE ---- */
    @media (max-width: 600px) {
      .project-card {
        padding: 2rem 1.5rem;
      }

      .projects-section {
        padding: 4rem 1rem 6rem;
      }

      .about-section {
        padding: 2rem 1.5rem;
      }

      .about-services {
        gap: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="grain"></div>
  <div class="cursor-glow" id="cursorGlow"></div>

  <nav class="top-nav">
    <div class="lang-toggle">
      <button class="lang-btn active" data-lang="sv" onclick="setLang('sv')">SV</button>
      <button class="lang-btn" data-lang="en" onclick="setLang('en')">EN</button>
    </div>
  </nav>

  <section class="hero">
    <h1 class="hero-title">
      <span class="line"><span>SECOND</span></span>
      <span class="line"><span>OAK</span></span>
    </h1>
    <p class="hero-sub" data-i18n="heroSub">Small Studio. Sharp Work.</p>
    <div class="scroll-indicator">
      <span data-i18n="scroll">Scrolla</span>
      <div class="scroll-line"></div>
    </div>
  </section>

  <section class="about-section">
    <div class="about-inner">
      <p class="about-label" data-i18n="aboutLabel">OM OSS</p>
      <p class="about-text" data-i18n="aboutText">
        <strong>Second Oak</strong> hj&auml;lper f&ouml;retag att bygga digitala produkter som anv&auml;ndarna faktiskt vill anv&auml;nda. Vi arbetar med <strong>produktdesign</strong>, <strong>UX</strong> och <strong>UI</strong> genom hela processen - fr&aring;n tidig id&eacute; till polerad slutprodukt.
      </p>
      <div class="about-services">
        <span class="service-item" data-i18n="service1">Produktdesign</span>
        <span class="service-item" data-i18n="service2">UX-design</span>
        <span class="service-item" data-i18n="service3">UI-design</span>
        <span class="service-item" data-i18n="service4">Prototyper</span>
      </div>
    </div>
  </section>

  <section class="projects-section" id="projectsSection">
    <div class="projects-inner">
    <p class="section-label" data-i18n="projectsLabel">PLAYGROUND</p>
    <p class="playground-desc" data-i18n="playgroundDesc">Sm&aring; anv&auml;ndbara verktyg, vibekodade med olika tekniker. Varje projekt l&ouml;ser en specifik uppgift.</p>
    <div class="projects-grid">
      <a href="/calendar/" class="project-card" data-animate>
        <div class="card-top">
          <span class="project-number">01</span>
          <svg class="project-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M7 17L17 7M17 7H7M17 7V17"/>
          </svg>
        </div>
        <div class="project-name" data-i18n="project1Name">CALPRINT</div>
        <p class="project-desc" data-i18n="project1Desc">Utskriftsv&auml;nlig kalender med anpassningsbart utseende, teman och vecko- samt m&aring;nadsvy.</p>
        <div class="project-tags">
          <span class="tag">HTML</span>
          <span class="tag">CSS</span>
          <span class="tag">JavaScript</span>
          <span class="tag">Print</span>
        </div>
      </a>

      <a href="/koordinator/" class="project-card" data-animate>
        <div class="card-top">
          <span class="project-number">02</span>
          <svg class="project-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M7 17L17 7M17 7H7M17 7V17"/>
          </svg>
        </div>
        <div class="project-name" data-i18n="project2Name">Koordinator</div>
        <p class="project-desc" data-i18n="project2Desc">Konvertera och s&ouml;k koordinater mellan SWEREF99, RT90 och WGS84 med karta och adresss&ouml;kning.</p>
        <div class="project-tags">
          <span class="tag">React</span>
          <span class="tag">TypeScript</span>
          <span class="tag">Leaflet</span>
          <span class="tag">OSM</span>
        </div>
      </a>

      <a href="/retrocast/" class="project-card" data-animate>
        <div class="card-top">
          <span class="project-number">03</span>
          <svg class="project-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M7 17L17 7M17 7H7M17 7V17"/>
          </svg>
        </div>
        <div class="project-name" data-i18n="project3Name">RETROCAST</div>
        <p class="project-desc" data-i18n="project3Desc">Utforska och j&auml;mf&ouml;r historisk v&auml;derdata &mdash; se hur v&auml;dret sett ut genom &aring;ren.</p>
        <div class="project-tags">
          <span class="tag">React</span>
          <span class="tag">TypeScript</span>
          <span class="tag">Vite</span>
          <span class="tag">API</span>
        </div>
      </a>
    </div>
    </div>
  </section>

  <footer>&copy; 2026 SECOND OAK</footer>

  <script>
    const translations = {
      sv: {
        heroSub: 'Small Studio. Sharp Work.',
        scroll: 'Scrolla',
        aboutLabel: 'OM OSS',
        aboutText: '<strong>Second Oak</strong> hj\u00e4lper f\u00f6retag att bygga digitala produkter som anv\u00e4ndarna faktiskt vill anv\u00e4nda. Vi arbetar med <strong>produktdesign</strong>, <strong>UX</strong> och <strong>UI</strong> genom hela processen - fr\u00e5n tidig id\u00e9 till polerad slutprodukt.',
        service1: 'Produktdesign',
        service2: 'UX-design',
        service3: 'UI-design',
        service4: 'Prototyper',
        projectsLabel: 'PLAYGROUND',
        playgroundDesc: 'Sm\u00e5 anv\u00e4ndbara verktyg, vibekodade med olika tekniker. Varje projekt l\u00f6ser en specifik uppgift.',
        project1Name: 'CALPRINT',
        project1Desc: 'Utskriftsv\u00e4nlig kalender med anpassningsbart utseende, teman och vecko- samt m\u00e5nadsvy.',
        project2Name: 'Koordinator',
        project2Desc: 'Konvertera och s\u00f6k koordinater mellan SWEREF99, RT90 och WGS84 med karta och adresss\u00f6kning.',
        project3Name: 'RETROCAST',
        project3Desc: 'Utforska och j\u00e4mf\u00f6r historisk v\u00e4derdata \u2014 se hur v\u00e4dret sett ut genom \u00e5ren.',
      },
      en: {
        heroSub: 'Small Studio. Sharp Work.',
        scroll: 'Scroll',
        aboutLabel: 'ABOUT US',
        aboutText: '<strong>Second Oak</strong> helps companies build digital products that users actually want to use. We work with <strong>product design</strong>, <strong>UX</strong> and <strong>UI</strong> throughout the entire process - from early idea to polished end product.',
        service1: 'Product Design',
        service2: 'UX Design',
        service3: 'UI Design',
        service4: 'Prototyping',
        projectsLabel: 'PLAYGROUND',
        playgroundDesc: 'Small useful tools, vibe-coded with various techniques. Each project solves a specific task.',
        project1Name: 'CALPRINT',
        project1Desc: 'A printable calendar with customizable themes, layouts and both weekly and monthly views.',
        project2Name: 'Koordinator',
        project2Desc: 'Convert and search coordinates between SWEREF99, RT90 and WGS84 with map and address lookup.',
        project3Name: 'RETROCAST',
        project3Desc: 'Explore and compare historical weather data \u2014 see how the weather looked through the years.',
      },
    };

    let currentLang = localStorage.getItem('so_lang') || 'sv';
    let aboutVisible = false;

    function setLang(lang) {
      currentLang = lang;
      localStorage.setItem('so_lang', lang);
      document.documentElement.lang = lang;

      document.querySelectorAll('.lang-btn').forEach((btn) => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
      });

      const t = translations[lang];
      document.querySelectorAll('[data-i18n]').forEach((el) => {
        const key = el.dataset.i18n;
        if (t[key]) {
          if (key === 'aboutText') {
            el.innerHTML = t[key];
            if (typeof wrapWords === 'function') {
              wrapWords(el);
              // If about section is currently visible, show words immediately
              if (aboutVisible) {
                el.querySelectorAll('.word').forEach(w => w.classList.add('revealed'));
              }
            }
          } else {
            el.textContent = t[key];
          }
        }
      });
    }

    // Init language
    setLang(currentLang);

    // Cursor glow
    const glow = document.getElementById('cursorGlow');
    document.addEventListener('mousemove', (e) => {
      glow.style.left = e.clientX + 'px';
      glow.style.top = e.clientY + 'px';
    });

    // Project cards — triggered by JS in scroll handler, not IntersectionObserver
    const projectCards = document.querySelectorAll('.project-card[data-animate]');

    // Word-by-word reveal for about section
    function wrapWords(el) {
      const html = el.innerHTML;
      // Split on word boundaries while preserving <strong> tags
      const wrapped = html.replace(/(<strong>|<\/strong>)/g, '\u0000$1\u0000')
        .split('\u0000')
        .map(part => {
          if (part.startsWith('<')) return part; // HTML tags pass through
          return part.split(/(\s+)/).map(token => {
            if (!token.trim()) return token; // whitespace pass through
            return `<span class="word">${token}</span>`;
          }).join('');
        }).join('');
      el.innerHTML = wrapped;
    }

    const aboutText = document.querySelector('.about-text');
    const aboutLabel = document.querySelector('.about-label');
    const serviceItems = document.querySelectorAll('.service-item');

    // Elements
    const heroTitle = document.querySelector('.hero-title');
    const lineSecond = document.querySelector('.hero-title .line:nth-child(1) span');
    const lineOak = document.querySelector('.hero-title .line:nth-child(2) span');
    const heroSub = document.querySelector('.hero-sub');
    const scrollInd = document.querySelector('.scroll-indicator');
    const aboutSection = document.querySelector('.about-section');
    const projectsSection = document.getElementById('projectsSection');
    let introReady = false;

    // Track states to avoid redundant toggles
    let pgVisible = false;
    let wordTimers = [];

    function clamp01(v) { return Math.max(0, Math.min(1, v)); }

    // Reveal about words with animation
    function revealAboutWords() {
      // Clear any pending timers from previous reveal
      wordTimers.forEach(t => clearTimeout(t));
      wordTimers = [];
      // Reset all words to hidden
      aboutLabel.classList.remove('revealed');
      aboutText.querySelectorAll('.word').forEach(w => w.classList.remove('revealed'));
      serviceItems.forEach(item => item.classList.remove('revealed'));
      // Animate in
      wordTimers.push(setTimeout(() => aboutLabel.classList.add('revealed'), 100));
      const words = aboutText.querySelectorAll('.word');
      words.forEach((word, i) => {
        wordTimers.push(setTimeout(() => word.classList.add('revealed'), 300 + i * 30));
      });
      const textDone = 300 + words.length * 30;
      serviceItems.forEach((item, i) => {
        wordTimers.push(setTimeout(() => item.classList.add('revealed'), textDone + 100 + i * 80));
      });
    }

    // Hide about words (reset)
    function hideAboutWords() {
      wordTimers.forEach(t => clearTimeout(t));
      wordTimers = [];
      aboutLabel.classList.remove('revealed');
      aboutText.querySelectorAll('.word').forEach(w => w.classList.remove('revealed'));
      serviceItems.forEach(item => item.classList.remove('revealed'));
    }

    setTimeout(() => {
      introReady = true;
      heroTitle.classList.add('scroll-ready');
      lineSecond.style.animation = 'none';
      lineSecond.style.transform = 'translateX(0)';
      lineOak.style.animation = 'none';
      lineOak.style.transform = 'translateX(0)';
      heroTitle.style.animation = 'none';
      heroTitle.style.opacity = '1';
      heroSub.style.animation = 'none';
      heroSub.style.opacity = '1';
      heroSub.style.transform = 'translateY(0)';
    }, 1400);
    setTimeout(() => {
      scrollInd.style.animation = 'none';
      scrollInd.style.opacity = '1';
    }, 1900);

    // ---- ABOUT: reveal words when section is visible ----
    const aboutObserver = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting && !aboutVisible) {
          aboutVisible = true;
          revealAboutWords();
        } else if (!entry.isIntersecting && aboutVisible) {
          aboutVisible = false;
          hideAboutWords();
        }
      });
    }, { threshold: 0.3 });
    aboutObserver.observe(aboutSection);

    window.addEventListener('scroll', () => {
      if (!introReady) return;
      const y = window.scrollY;
      const winH = window.innerHeight;

      // ---- HERO: scroll-driven parallax fade ----
      const heroFade = clamp01(1 - y / (winH * 0.4));
      heroTitle.style.opacity = heroFade;
      lineSecond.style.transform = `translateX(${-y * 0.8}px)`;
      lineOak.style.transform = `translateX(${y * 0.8}px)`;
      heroSub.style.transform = `translateY(${-y * 0.3}px)`;
      heroSub.style.opacity = heroFade;

      // Scroll indicator
      const scrollFade = clamp01(1 - y / 80);
      scrollInd.style.opacity = scrollFade;
      scrollInd.style.transform = `translateY(${-y * 1.5}px)`;
      scrollInd.style.visibility = scrollFade === 0 ? 'hidden' : 'visible';

      // ---- DARK MODE + PROJECTS: threshold toggle ----
      const pgRect = projectsSection.getBoundingClientRect();
      const shouldShowPg = pgRect.top < winH * 0.5;

      if (shouldShowPg && !pgVisible) {
        pgVisible = true;
        document.body.classList.add('dark-mode');
        setTimeout(() => projectsSection.classList.add('visible'), 50);
        projectCards.forEach((card, i) => {
          setTimeout(() => card.classList.add('visible'), 900 + i * 150);
        });
      } else if (!shouldShowPg && pgVisible) {
        pgVisible = false;
        projectsSection.classList.remove('visible');
        projectCards.forEach(card => card.classList.remove('visible'));
        document.body.classList.remove('dark-mode');
      }
    });
  </script>
</body>
</html>
